<ng-container *ngIf="tournament$ | async as tournamentDetails">
  <div
    *ngIf="
      limitInscriptionValue === 0 ||
      tournamentDetails.currentNumberOfParticipants ===
        tournamentDetails.maxNumberOfTeams
    "
  >
    <button
      mat-raised-button
      color="primary"
      (click)="openDialog()"
      *ngIf="
        limitInscriptionValue === 0 &&
        !tournamentDetails.isGenerated &&
        tournamentDetails.isOwner
      "
    >
      GÉNÉRER LE TOURNOI
    </button>
  </div>
  <div
    *ngIf="tournamentDetails.isGenerated"
    class="list-tournament-tree-container"
  >
    <div class="list-tournament-tree-container-details">
      <div *ngIf="matchesByPhase" class="list-tournament-tree-container-cards">
        <div *ngFor="let phaseKey of phaseKeys">
          <div *ngIf="phaseKey === 'Phase préliminaire'">
            <h2>{{ phaseKey }}</h2>
            <div *ngFor="let match of matchesByPhase[phaseKey]">
              <app-card-tournament-match
                [match]="match"
                [matchesByPhase]="matchesByPhase"
                [phaseKey]="phaseKey"
              ></app-card-tournament-match>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="list-tournament-tree-container-details">
      <div *ngIf="matchesByPhase" class="list-tournament-tree-container-cards">
        <div *ngFor="let phaseKey of sortPhaseKeysByMatchCount(phaseKeys)">
          <div *ngIf="phaseKey !== 'Phase préliminaire'">
            <h2>{{ phaseKey }}</h2>
            <div *ngFor="let match of matchesByPhase[phaseKey]">
              <app-card-tournament-match
                [match]="match"
              ></app-card-tournament-match>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-container>
